# コードは誰の持ち物か

## 共有資産としてのコード

### コードの目的とは何か？

コードは誰の持ち物でしょう。
もちろん、契約や法律の観点から、誰の資産であるかは定められています。
著作権や著作者人格権の問題、依頼主との契約関係、社員としての開発なのかなど各種条件によって、所有者が決まります。
これだけで一冊の本が書けるぐらいとても複雑な問題です。
ここでは、法的な課題はおいておいて、「ソースコードは誰のために存在して、誰の持ち物か」という[少しふわりとした精神論]{.green-text-emphasis}について考察します。

まず、ITシステムにかかわる人を考えましょう。
コードは、ITシステムのもとになるものです。
ITシステムが動作しなかったら、かかわる人全員が困ります。
ITシステムにかかわる人を図に示しました。

![コードの所有者モデル](../../assets/img/emotional_public-property_property_model.drawio.svg)

| 所有者 | 説明                                           |
| ------ | ---------------------------------------------- |
| 開発者 | ソースコードを記述する人です                   |
| 構築者 | ソースコードをもとにサーバ上で稼働させる人です |
| 保守者 | 動き始めたシステムを維持管理する人です         |
| 提供者 | システムをもとにサービスを提供する人です       |
| 利用者 | サービスを利用する人です                       |

抽象度が高いのでとっつきにくいかもしれません。
具体的な例に置き換えてとわかりやすく説明します。
高速道路のETCシステムを考えましょう。

* [開発者]{.green-text-emphasis} **B1社**: A社の依頼を受けETCシステムを開発した会社
* [構築者]{.green-text-emphasis} **B2社**: A社の依頼を受け、B1社が開発システムを稼働できるようにした会社
* [保守者]{.green-text-emphasis} **B3社**: B1社が開発し、B2社が構築したシステムを、A社の依頼を受けETCシステムを稼働している会社
* [提供者]{.green-text-emphasis} **A社**: 「高速道路」という名前のサービスを提供する会社
* [利用者]{.green-text-emphasis} **X**: 道路を走るドライバ

このように、システムを構成するコードは、単なる個人の著作物ではなく、[特定の目的を達成するためのツール]{.blue-text-emphasis}としての意味が強いです。
一人ではなく、複数人がかかわることで、維持され運用されていきます。

したがって、このような場合、単に「動けばいい」ではなく、複数人の「共有資産」として維持・運用されるすべきです。
もし、一人でもソースコードを個人の所有物と考えると、メンテナンスや改善の妨げになり、結果的に自分の負担も増えます。

::labeled-container-with-fa-icon{type="note"}

* 日本で稼働している多くのシステムは、B1, B2, B3 が同一の会社の場合もあれば、別会社の場合もある
* B1社は、単にシステムを開発するだけではなく、一部のソースコードを他社に依頼することもある
* B2社は、他社から複数の会社からシステムを購入して稼働まで仕上げることもある

::

### 共有しないとどうなるか

『もし、ある開発者が「このソースコードは俺のコードだ」と勘違いした』と仮定しましょう。
そうすると、必然的に自分だけ読めればいい、ほかのソースコードとの整合性などどうでもよいという心理が働きます。

退職、部門移動などの要因で、その人がメンバから外れることは大いに考えられます。
サービス提供をしている会社が、維持管理をその開発者がいる会社に依頼し続けない可能性もあります。
[自分勝手なソースコード](./anti-pattern.md)は、特定の人物への依存が高まっていきます。
最終的にその人は、一生メンテナンスの責務を追うことになります。

このような状態のことを [コードの属人化]{.red-text-emphasis} と呼ばれ、プロジェクトのアンチパターンとしてよく知られています。

### 共有の目的

ソースコードを共有することには多くの利点があります。
まず、コードが公開されることで、より多くの人の目に触れます。
これにより、開発者は[他人の視線を意識しながらコードと向き合う機会が増え]{.blue-text-emphasis}、結果として自身でもそのコードをよく読むようになります。
こうした習慣が身につくことで、バグの早期発見が可能になり、問題を未然に防ぐことができます。

さらに、共有されることでコードの可読性が向上し、他の開発者がリファクタリングしやすくなります。
その結果、技術的負債が蓄積しにくくなり、プロジェクトの長期的な健全性が保たれます。
また、コードを共有することで、自分が不在の場合でも誰かが問題を解決できるという安心感が生まれ、チーム全体の生産性が向上します。

このように、ソースコードを「みんなでメンテナンスできる」状態にすることで、開発効率が向上し、品質の高いコードを維持できるのです。

## 透明性の高いコミュニケーション

### 誤解を減らし、意思疎通を円滑にする

コードの記述において曖昧な部分があると、誤解が生じやすくなります。
チーム開発では、変数名や関数名を明確にし、コードレビューの際に意図をしっかり説明することで認識のズレをなくし、効率的な開発を実現できます。
同様に、個人開発においても「未来の自分」とのコミュニケーションを意識することが重要です。
数カ月後にコードを見返した際にスムーズに理解できるよう、適切なコメントを付けたり命名規則を統一したりしましょう。
こうすることで、メンテナンスの負担を軽減し、質の高いコードを維持できます。

### 前向きなフィードバックの習慣 – 「改善」の視点を持ち、成長を促す

コードレビューの目的は、単なる指摘ではなく、より良いソフトウェアを作るための改善にあります。
フィードバックを受ける側／提供する側の両面で「より良くするためにはどうすればよいか」という視点を持つべきです。
建設的な議論が生まれ、チーム全体のスキル向上が促進され、継続的に品質の高いコードを生み出せる環境が整います。
一方で、個人開発ではコードレビューの機会がないため、外部からのフィードバックを得る工夫が重要になります。
例えば、オープンソースプロジェクトに参加したり、ブログやSNSでコードの設計について発信したりします。
こうすることで、意図的に他の開発者からの意見を得る環境を構築できます。
また、自分自身で定期的にリファクタリングを行い、「このコードは本当に最適か？」と問い続ける習慣を持つことは大切です。
継続的な成長につながり、より洗練されたコードを書く力が養われます。

### 明確なコミュニケーションを通じて、協力しやすい環境を作る

開発では、単独作業だけでなくチームとして協力することが重要です。
明確なコミュニケーションを心がけることで意思疎通がスムーズになり、問題解決が迅速に進みます。
互いに助け合いながら作業することで、強固なチームワークが育まれ、結果として高品質なコードの維持につながります。
一方、個人開発においても技術コミュニティと関わることで協力しやすい環境を作ることができます。
例えば、GitHub や Qiita などでコードを公開し、他の開発者と交流することで、新たな視点や改善のヒントを得ることが可能です。
さらに、ドキュメントを整理しておくことで、他の人がコードを活用しやすくなり、結果的にプロジェクトの成長に貢献できます。

## 簡潔で意図が明確なコード

以上により、読みやすく、理解しやすいコードを記述する目的を理解していただけたと思われます。
将来の開発者が素早く理解できるコードを書くことで、チーム全体の生産性を向上させるのです。

具体的には
[次章でまとめる技術側面](../technical/)
を活用より良いコードを継続的に改善しながら運用していくことです。

::labeled-container-with-fa-icon{type="tip"}

ソースコードだけでは十分に書ききれない「意図」が存在します。
そのような意図は、図示しながら、別ドキュメントに「設計メモ」としてソースコードとペアで保存しておくことも重要です。

::
